<!doctypehtml><title>Loop Switcher</title><meta content="width=device-width,initial-scale=1"name=viewport><meta charset=utf-8><link href=data:, rel=icon><style>html{font-family:Helvetica;display:inline-block;margin:0 auto;text-align:center;background-color:#1f1f1f}.page-container{width:80vw;margin:auto}h1{color:#99c3ff;padding:2vh}p{font-size:1.5rem;color:#dadce0}.container{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.btn{margin:10px}.bank-button,.patch-button{display:inline-block;background-color:#e7bd3b;border:none;border-radius:4px;color:#fff;padding:16px 40px;text-decoration:none;font-size:30px;margin:2px;cursor:pointer}.down{background-color:#4286f4}.loop-container{margin-top:1rem}.effect-loop div{background-color:#3c4043;border:1px solid #fff;border-radius:10px;margin:10px;cursor:pointer;width:50px;height:100px;margin:0 auto}.loop-name{font-size:1rem}.effect-loop .enabled,.switch .enabled{background-color:#34a853}.effect-loop .disabled,.switch .disabled{background-color:#ea4335}.footswitch{background-color:#3c4043;border:1px solid #fff;border-radius:10px;margin:10px;padding:1rem}.switch div{border:1px solid #fff;border-radius:100%;margin:0 auto;width:20px;height:20px}.switch-name{text-transform:capitalize;font-size:1.5rem}</style><script>document.addEventListener("DOMContentLoaded", () => {document.querySelectorAll("form").forEach(form => {form.addEventListener("submit", async function(event) {event.preventDefault();const formData = new FormData(form);try {await fetch(form.action, {method: form.method,headers: { "Content-Type": "application/x-www-form-urlencoded" },body: new URLSearchParams(formData),});} catch (err) {console.error("Error submitting form:", err);}});});});function initEventSource() {const evtSource = new EventSource("/events");const elements = {bank: document.getElementById("bank"),patch: document.getElementById("patch"),midi_program: document.getElementById("midi_program")};var currentData = "";evtSource.onmessage = event => {const data = JSON.parse(event.data);if (event.data != currentData) {console.log('data: ', data); currentData = event.data;for (const key in data.classes) {const el = document.getElementById(key);if (el) el.className = data.classes[key];}elements.bank.innerText = data.bank;elements.patch.innerText = data.patch;elements.midi_program.innerText = data.midi_program;}};evtSource.onerror = () => {console.warn("SSE connection lost, reconnecting...");evtSource.close();setTimeout(initEventSource, 2000);};};document.addEventListener("DOMContentLoaded", initEventSource);</script><div class=page-container><h1>Loop Switcher</h1><p>Bank: <span id=bank>{{ bank }}</span><p>Patch: <span id=patch>{{ patch }}</span><div class=container><div><form action=/ class=btn method=post><input type=hidden value=up name=bank> <input type=submit value="Bank Up"class="submit bank-button up"></form><form action=/ class=btn method=post><input type=hidden value=down name=bank> <input type=submit value="Bank down"class="submit bank-button down"></form></div><div class=container><form action=/ class=btn method=post><input type=hidden value=1 name=patch> <input type=submit value=1 class="submit patch-button"></form><form action=/ class=btn method=post><input type=hidden value=2 name=patch> <input type=submit value=2 class="submit patch-button"></form><form action=/ class=btn method=post><input type=hidden value=3 name=patch> <input type=submit value=3 class="submit patch-button"></form><form action=/ class=btn method=post><input type=hidden value=4 name=patch> <input type=submit value=4 class="submit patch-button"></form></div></div><div class="container loop-container"><div class=effect-loop><div class="{{ }} loop1_status"id=loop1_status></div><p class=loop-name>{{ loop1_name }}</div><div class=effect-loop><div class="{{ }} loop2_status"id=loop2_status></div><p class=loop-name>{{ loop2_name }}</div><div class=effect-loop><div class="{{ }} loop3_status"id=loop3_status></div><p class=loop-name>{{ loop3_name }}</div><div class=effect-loop><div class="{{ }} loop4_status"id=loop4_status></div><p class=loop-name>{{ loop4_name }}</div><div class=effect-loop><div class="{{ }} loop5_status"id=loop5_status></div><p class=loop-name>{{ loop5_name }}</div><div class=effect-loop><div class="{{ }} loop6_status"id=loop6_status></div><p class=loop-name>{{ loop6_name }}</div><div class=effect-loop><div class="{{ }} loop7_status"id=loop7_status></div><p class=loop-name>{{ loop7_name }}</div><div class=effect-loop><div class="{{ }} loop8_status"id=loop8_status></div><p class=loop-name>{{ loop8_name }}</div></div><div class="container footswitch"><div class=switch><div class="{{ }} switch1_status"id=switch1_status></div><p class=switch-name>{{ switch1_name }}</div><div class=switch><div class="{{ }} switch2_status"id=switch2_status></div><p class=switch-name>{{ switch2_name }}</div><div class=switch><div class="{{ }} switch3_status"id=switch3_status></div><p class=switch-name>{{ switch3_name }}</div><div class=switch><div class="{{ }} switch4_status"id=switch4_status></div><p class=switch-name>{{ switch4_name }}</div></div><div class=container><p>Midi Program: <span id=midi_program>{{ midi_program }}</span></div></div>